<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Boost your mood with MoodTask! Select your mood and get quick, science-backed tasks to feel better in seconds.">
    <meta name="keywords" content="moodtask, mood boost, mental health, quick tasks">
    <meta name="robots" content="index, follow">
    <title>MoodTask | Boost Your Mood in Seconds</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1511837633001567" crossorigin="anonymous" data-ad-init-load="300"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4985X51W1J"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-4985X51W1J');
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <nav id="nav">
        <div class="logo">Mood<span>Task</span></div>
        <div class="nav-links">
            <a href="index.html" class="nav-button active">Home</a>
            <a href="about.html" class="nav-button">About</a>
        </div>
    </nav>

    <div class="hero-section">
        <h1>Boost Your Mood in Seconds</h1>
        <h2>Select Your Mood and Get a Quick, Science-Backed Task</h2>
        <button class="hero-cta" onclick="scrollToMoodPrompt()">Get Started</button>
    </div>

    <div id="intro-content">
        <h2 class="section-heading">Why MoodTask?</h2>
        <div class="feature-cards">
            <div class="feature-card">
                <span class="feature-icon">‚ö°</span>
                <h3>Quick Tasks</h3>
                <p>Most tasks take less than a minute, perfect for busy days.</p>
            </div>
            <div class="feature-card">
                <span class="feature-icon">üß†</span>
                <h3>Science-Backed</h3>
                <p>Tasks are rooted in psychology and neuroscience research.</p>
            </div>
            <div class="feature-card">
                <span class="feature-icon">üéØ</span>
                <h3>Personalized</h3>
                <p>Get activities tailored to your current mood.</p>
            </div>
        </div>
    </div>

    <div id="mood-prompt">
        <h2 id="instruction">How Are You Feeling Right Now?</h2>
        <div id="mood-buttons">
            <button data-mood="tired" data-tooltip="Feeling low-energy or sleepy?"><span class="mood-icon">üò¥</span> Tired</button>
            <button data-mood="stressed" data-tooltip="Feeling overwhelmed or tense?"><span class="mood-icon">üò∞</span> Stressed</button>
            <button data-mood="sad" data-tooltip="Feeling down or emotional?"><span class="mood-icon">üò¢</span> Sad</button>
            <button data-mood="anxious" data-tooltip="Feeling nervous or worried?"><span class="mood-icon">üòü</span> Anxious</button>
            <button data-mood="angry" data-tooltip="Feeling frustrated or upset?"><span class="mood-icon">üò†</span> Angry</button>
            <button data-mood="bored" data-tooltip="Feeling restless or uninspired?"><span class="mood-icon">üòê</span> Bored</button>
            <button data-mood="happy" data-tooltip="Feeling cheerful or content?"><span class="mood-icon">üòä</span> Happy</button>
            <button data-mood="lonely" data-tooltip="Feeling isolated or disconnected?"><span class="mood-icon">üòî</span> Lonely</button>
        </div>
    </div>

    <div id="result"></div>

    <div class="tools-container">
        <button class="tool-button breathing" onclick="openPopup('breathing')"><i class="fas fa-wind tool-icon"></i> Breathing Exercise</button>
        <button class="tool-button gratitude" onclick="openPopup('gratitude')"><i class="fas fa-heart tool-icon"></i> Gratitude Note</button>
        <button class="tool-button soundscape" onclick="openPopup('soundscape')"><i class="fas fa-headphones tool-icon"></i> Soundscape</button>
        <button class="tool-button punching" onclick="openPopup('punching')"><i class="fas fa-fist-raised tool-icon"></i> Punching Bag</button>
        <button class="tool-button stretch" onclick="openPopup('stretch')"><i class="fas fa-child tool-icon"></i> Quick Stretch</button>
        <button class="tool-button doodle" onclick="openPopup('doodle')"><i class="fas fa-paint-brush tool-icon"></i> Doodle Pad</button>
        <button class="tool-button dance" onclick="openPopup('dance')"><i class="fas fa-music tool-icon"></i> Dance Break</button>
        <button class="tool-button worry" onclick="openPopup('worry')"><i class="fas fa-trash tool-icon"></i> Worry Shredder</button>
        <button class="tool-button color" onclick="openPopup('color')"><i class="fas fa-palette tool-icon"></i> Color Shift</button>
    </div>

    <div id="banner">
        <p class="disclaimer"><em>Affiliate Disclosure: MoodTask may earn a commission if you click the link below and make a purchase, at no additional cost to you.</em></p>
        <p class="ad-label">Sponsored: Support Your Mental Health</p>
        <a href="https://onlinetherapy.go2cloud.org/SHjO?file_id=78" class="banner-link">
            <img src="https://media.go2speed.org/brand/files/onlinetherapy/2/online-therapy-com-logo-728x90.png" alt="Online Therapy Banner" class="banner-img">
        </a>
        <img src="https://onlinetherapy.go2cloud.org/aff_i?offer_id=2&file_id=78&aff_id=4837" width="0" height="0" style="position:absolute;visibility:hidden;" border="0" />
    </div>

    <button id="share" aria-label="Share this page on X">
        <svg class="share-logo" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
        </svg>
        <span>Share on X</span>
    </button>

    <div id="donate">
        <h3>Support MoodTask</h3>
        <p>If you find MoodTask helpful, please consider supporting us!</p>
        <a href="https://www.buymeacoffee.com/moodtask" target="_blank" rel="noopener noreferrer">
            <img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me a Coffee" style="width: 150px; height: auto;">
        </a>
    </div>

    <footer>
        <div class="footer-columns">
            <div class="footer-column">
                <h4>MoodTask</h4>
                <p>Transform your mood in seconds with fun, quick activities tailored to how you feel.</p>
            </div>
            <div class="footer-column">
                <h4>Quick Links</h4>
                <a href="index.html" class="footer-link">Home</a>
                <a href="about.html" class="footer-link">About</a>
            </div>
            <div class="footer-column">
                <h4>Legal</h4>
                <a href="privacy.html" class="footer-link">Privacy Policy</a>
                <a href="terms.html" class="footer-link">Terms of Use</a>
            </div>
        </div>
        <p class="disclaimer"><em>General Disclaimer: MoodTask provides this website for informational purposes only. We are not responsible for any errors, omissions, or outcomes resulting from the use of this information. Users follow external links, including those to third-party sites, at their own risk. Always review the terms and privacy policies of external websites.</em></p>
        <p class="copyright">¬© 2025 MoodTask. All rights reserved.</p>
    </footer>

    <div id="breathingPopup" class="popup">
        <div class="popup-content">
            <button class="close-button" onclick="closePopup('breathing')">‚úï</button>
            <h4>Breathing Exercise</h4>
            <p>Follow the circle's rhythm: inhale for 4 seconds, hold for 4, and exhale for 4.</p>
            <div id="breathing-circle">Inhale</div>
            <button class="action-button" onclick="startBreathing()">Start</button>
        </div>
    </div>

    <div id="gratitudePopup" class="popup">
        <div class="popup-content">
            <button class="close-button" onclick="closePopup('gratitude')">‚úï</button>
            <h4>Gratitude Note</h4>
            <p>Write down three things you're grateful for today.</p>
            <textarea id="gratitude-text" placeholder="I‚Äôm grateful for..."></textarea>
            <button class="action-button" onclick="saveGratitude()">Save</button>
        </div>
    </div>

    <div id="soundscapePopup" class="popup">
        <div class="popup-content">
            <button class="close-button" onclick="closePopup('soundscape')">‚úï</button>
            <h4>Relaxing Soundscape</h4>
            <p>Choose a sound and relax for 30 seconds.</p>
            <select class="sound-select" id="sound-select">
                <option value="rain">Rain</option>
                <option value="waves">Ocean Waves</option>
                <option value="forest">Forest</option>
            </select>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playSoundscape()"><i class="fas fa-play"></i></button>
                <button class="audio-btn" onclick="pauseSoundscape()"><i class="fas fa-pause"></i></button>
            </div>
            <div class="progress-container">
                <div class="progress-bar" id="soundscape-progress"></div>
            </div>
        </div>
    </div>

    <div id="punchingPopup" class="popup">
        <div class="popup-content">
            <button class="close-button" onclick="closePopup('punching')">‚úï</button>
            <h4>Punching Bag</h4>
            <p>Click the bag to release your stress! (10 punches)</p>
            <div id="punching-bag">10</div>
            <p id="punch-counter">Punches left: 10</p>
        </div>
    </div>

    <div id="stretchPopup" class="popup">
        <div class="popup-content">
            <button class="close-button" onclick="closePopup('stretch')">‚úï</button>
            <h4>Quick Stretch</h4>
            <p>Raise your arms up, hold for 5 seconds, then slowly lower them. Repeat 3 times.</p>
            <button class="action-button" onclick="startStretch()">Start</button>
        </div>
    </div>

    <div id="doodlePopup" class="popup">
        <div class="popup-content">
            <button class="close-button" onclick="closePopup('doodle')">‚úï</button>
            <h4>Doodle Pad</h4>
            <p>Draw freely to relax your mind.</p>
            <div class="drawing-tools">
                <input type="color" id="doodle-color" value="#000000">
                <button class="action-button" onclick="clearDoodle()">Clear</button>
            </div>
            <canvas id="doodle-canvas"></canvas>
        </div>
    </div>

    <div id="dancePopup" class="popup">
        <div class="popup-content">
            <button class="close-button" onclick="closePopup('dance')">‚úï</button>
            <h4>Dance Break</h4>
            <p>Play a beat and dance for 15 seconds!</p>
            <div class="audio-controls">
                <button class="audio-btn" onclick="playDanceBeat()"><i class="fas fa-play"></i></button>
                <button class="audio-btn" onclick="pauseDanceBeat()"><i class="fas fa-pause"></i></button>
            </div>
            <div class="progress-container">
                <div class="progress-bar bounce" id="dance-progress"></div>
            </div>
        </div>
    </div>

    <div id="worryPopup" class="popup">
        <div class="popup-content">
            <button class="close-button" onclick="closePopup('worry')">‚úï</button>
            <h4>Worry Shredder</h4>
            <p>Type your worry, then shred it!</p>
            <textarea id="worry-text" placeholder="I‚Äôm worried about..."></textarea>
            <button class="action-button" onclick="shredWorry()">Shred It</button>
            <p id="worry-message"></p>
        </div>
    </div>

    <div id="colorPopup" class="popup">
        <div class="popup-content">
            <button class="close-button" onclick="closePopup('color')">‚úï</button>
            <h4>Color Shift</h4>
            <p>Watch the square change colors to relax your mind.</p>
            <div id="color-square" style="background-color: #2ecc71;"></div>
            <button class="action-button" onclick="startColorShift()">Start</button>
        </div>
    </div>

    <script>
        // Add scroll effect for nav
        window.addEventListener('scroll', () => {
            const nav = document.getElementById('nav');
            if (window.scrollY > 50) {
                nav.classList.add('scrolled');
            } else {
                nav.classList.remove('scrolled');
            }
        });

        // Scroll to mood prompt
        function scrollToMoodPrompt() {
            document.getElementById('mood-prompt').scrollIntoView({ behavior: 'smooth' });
            gtag('event', 'Get Started Click', { 'event_category': 'Hero', 'event_label': 'Get Started Button' });
        }

        // Mood to task mapping
        const moodTasks = {
            tired: [
                { emoji: "‚òï", task: "Take 5 deep breaths to re-energize.", followUp: "Feel more awake?" },
                { emoji: "üí°", task: "Stand up and stretch for 30 seconds.", followUp: "Feel more alert?" },
                { emoji: "üé∂", task: "Listen to an upbeat song for a quick boost.", followUp: "Feeling energized?" }
            ],
            stressed: [
                { emoji: "üßò", task: "Try a 1-minute breathing exercise: inhale for 4, hold for 4, exhale for 4.", followUp: "Feel calmer?" },
                { emoji: "‚úçÔ∏è", task: "Write down what‚Äôs stressing you, then take a deep breath.", followUp: "Feel more in control?" },
                { emoji: "üö∂", task: "Take a quick 1-minute walk to clear your mind.", followUp: "Feel more relaxed?" }
            ],
            sad: [
                { emoji: "üíñ", task: "Think of one thing you‚Äôre grateful for today.", followUp: "Feel a bit brighter?" },
                { emoji: "üéµ", task: "Listen to a favorite song that lifts your spirits.", followUp: "Feeling better?" },
                { emoji: "ü§ó", task: "Text a friend or loved one to connect.", followUp: "Feel more supported?" }
            ],
            anxious: [
                { emoji: "üå≥", task: "Focus on 5 things you can see around you to ground yourself.", followUp: "Feel more present?" },
                { emoji: "üñêÔ∏è", task: "Place your hand on your heart and take 5 slow breaths.", followUp: "Feel calmer?" },
                { emoji: "üìù", task: "Write down your worry, then let it go for now.", followUp: "Feel less anxious?" }
            ],
            angry: [
                { emoji: "üëä", task: "Clench your fists, then release while exhaling slowly.", followUp: "Feel less tense?" },
                { emoji: "üì£", task: "Find a private space and let out a loud sigh or hum.", followUp: "Feel more released?" },
                { emoji: "üí®", task: "Take 5 deep breaths, exhaling longer than you inhale.", followUp: "Feel calmer?" }
            ],
            bored: [
                { emoji: "üé®", task: "Doodle on a piece of paper for 1 minute.", followUp: "Feel more engaged?" },
                { emoji: "üï∫", task: "Put on a song and dance for 30 seconds.", followUp: "Feeling more entertained?" },
                { emoji: "üí≠", task: "Think of a fun activity you‚Äôd like to do later today.", followUp: "Feel more inspired?" }
            ],
            happy: [
                { emoji: "üòÑ", task: "Share your happiness‚Äîtext a friend something positive!", followUp: "Feel even better?" },
                { emoji: "üéâ", task: "Celebrate with a quick dance or stretch.", followUp: "Still smiling?" },
                { emoji: "üì∏", task: "Take a moment to appreciate this feeling and smile.", followUp: "Feel the joy?" }
            ],
            lonely: [
                { emoji: "üìû", task: "Call or message a friend or family member.", followUp: "Feel more connected?" },
                { emoji: "üíå", task: "Write a kind note to yourself about your strengths.", followUp: "Feel more supported?" },
                { emoji: "üêæ", task: "If you have a pet, give them some love.", followUp: "Feel less alone?" }
            ]
        };

        // Select mood
        document.querySelectorAll('#mood-buttons button').forEach(button => {
            button.addEventListener('click', () => {
                document.querySelectorAll('#mood-buttons button').forEach(btn => btn.classList.remove('selected'));
                button.classList.add('selected');
                const mood = button.getAttribute('data-mood');
                showTask(mood);
                gtag('event', 'Mood Selection', { 'event_category': 'Mood', 'event_label': mood });
            });
        });

        // Show task based on mood
        function showTask(mood) {
            const tasks = moodTasks[mood];
            const randomTask = tasks[Math.floor(Math.random() * tasks.length)];
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = `
                <div class="chat-bubble">
                    <div class="task-header">
                        <span class="mood-emoji">${randomTask.emoji}</span>
                        <h3>Task for ${mood.charAt(0).toUpperCase() + mood.slice(1)}</h3>
                    </div>
                    <p class="task-text">${randomTask.task}</p>
                    <p class="follow-up-question">${randomTask.followUp}</p>
                    <div class="task-buttons">
                        <button class="favorite-button" onclick="saveFavorite('${mood}', '${randomTask.task}')">
                            <span class="heart-icon">‚ù§Ô∏è</span> Favorite
                        </button>
                        <button class="new-task-button" onclick="showTask('${mood}')">New Task</button>
                    </div>
                </div>
            `;
            resultDiv.scrollIntoView({ behavior: 'smooth' });
        }

        // Save favorite task (placeholder for future localStorage implementation)
        function saveFavorite(mood, task) {
            alert(`Saved to favorites: ${task}`);
            gtag('event', 'Favorite Task', { 'event_category': 'Task', 'event_label': `${mood} - ${task}` });
        }

        // Popup handling
        function openPopup(tool) {
            document.getElementById(`${tool}Popup`).style.display = 'flex';
            if (tool === 'doodle') initDoodle();
            gtag('event', 'Tool Opened', { 'event_category': 'Tool', 'event_label': tool });
        }

        function closePopup(tool) {
            document.getElementById(`${tool}Popup`).style.display = 'none';
            if (tool === 'soundscape') pauseSoundscape();
            if (tool === 'dance') pauseDanceBeat();
        }

        // Breathing exercise
        function startBreathing() {
            const circle = document.getElementById('breathing-circle');
            let step = 0;
            const steps = ['inhale', 'hold', 'exhale'];
            circle.className = ''; // Reset animation
            const interval = setInterval(() => {
                if (step >= 3) {
                    clearInterval(interval);
                    circle.textContent = 'Done!';
                    return;
                }
                circle.textContent = steps[step].charAt(0).toUpperCase() + steps[step].slice(1);
                circle.className = steps[step];
                step++;
            }, 4000);
        }

        // Gratitude note
        function saveGratitude() {
            const text = document.getElementById('gratitude-text').value;
            if (text.trim()) {
                alert('Gratitude note saved! (This will be stored locally in the future)');
                document.getElementById('gratitude-text').value = '';
                closePopup('gratitude');
            } else {
                alert('Please write something before saving.');
            }
        }

        // Soundscape
        let soundscapeAudio = null;
        let soundscapeInterval = null;

        function playSoundscape() {
            const select = document.getElementById('sound-select');
            const sound = select.value;
            if (soundscapeAudio) soundscapeAudio.pause();
            soundscapeAudio = new Audio(`sounds/${sound}.mp3`);
            soundscapeAudio.loop = false;
            soundscapeAudio.play();

            const progressBar = document.getElementById('soundscape-progress');
            progressBar.style.width = '100%';
            let timeLeft = 30;
            soundscapeInterval = setInterval(() => {
                timeLeft--;
                progressBar.style.width = (timeLeft / 30 * 100) + '%';
                if (timeLeft <= 0) {
                    clearInterval(soundscapeInterval);
                    soundscapeAudio.pause();
                }
            }, 1000);
        }

        function pauseSoundscape() {
            if (soundscapeAudio) soundscapeAudio.pause();
            if (soundscapeInterval) clearInterval(soundscapeInterval);
            document.getElementById('soundscape-progress').style.width = '100%';
        }

        // Punching bag
        let punchCount = 10;
        document.getElementById('punching-bag').addEventListener('click', () => {
            if (punchCount > 0) {
                punchCount--;
                const bag = document.getElementById('punching-bag');
                bag.style.transform = 'rotate(5deg)';
                setTimeout(() => bag.style.transform = 'rotate(-5deg)', 100);
                setTimeout(() => bag.style.transform = 'rotate(0deg)', 200);
                bag.textContent = punchCount;
                document.getElementById('punch-counter').textContent = `Punches left: ${punchCount}`;
                if (punchCount === 0) {
                    setTimeout(() => {
                        bag.textContent = 'Done!';
                        document.getElementById('punch-counter').textContent = 'Great job!';
                    }, 300);
                }
            }
        });

        // Stretch
        function startStretch() {
            alert('Follow the instructions: Raise your arms, hold for 5 seconds, and lower them. Repeat 3 times.');
            closePopup('stretch');
        }

        // Doodle pad
        let isDrawing = false;
        let lastX = 0;
        let lastY = 0;

        function initDoodle() {
            const canvas = document.getElementById('doodle-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;

            canvas.addEventListener('mousedown', (e) => {
                isDrawing = true;
                [lastX, lastY] = [e.offsetX, e.offsetY];
            });

            canvas.addEventListener('mousemove', (e) => {
                if (isDrawing) {
                    ctx.beginPath();
                    ctx.moveTo(lastX, lastY);
                    ctx.lineTo(e.offsetX, e.offsetY);
                    ctx.strokeStyle = document.getElementById('doodle-color').value;
                    ctx.lineWidth = 2;
                    ctx.stroke();
                    [lastX, lastY] = [e.offsetX, e.offsetY];
                }
            });

            canvas.addEventListener('mouseup', () => isDrawing = false);
            canvas.addEventListener('mouseout', () => isDrawing = false);
        }

        function clearDoodle() {
            const canvas = document.getElementById('doodle-canvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        // Dance break
        let danceAudio = null;
        let danceInterval = null;

        function playDanceBeat() {
            if (danceAudio) danceAudio.pause();
            danceAudio = new Audio('sounds/dance-beat.mp3');
            danceAudio.loop = false;
            danceAudio.play();

            const progressBar = document.getElementById('dance-progress');
            progressBar.className = 'progress-bar bounce';
            let timeLeft = 15;
            danceInterval = setInterval(() => {
                timeLeft--;
                progressBar.style.width = (timeLeft / 15 * 100) + '%';
                if (timeLeft <= 0) {
                    clearInterval(danceInterval);
                    danceAudio.pause();
                }
            }, 1000);
        }

        function pauseDanceBeat() {
            if (danceAudio) danceAudio.pause();
            if (danceInterval) clearInterval(danceInterval);
            document.getElementById('dance-progress').style.width = '100%';
        }

        // Worry shredder
        function shredWorry() {
            const worryText = document.getElementById('worry-text');
            const worryMessage = document.getElementById('worry-message');
            if (worryText.value.trim()) {
                worryText.classList.add('shredding');
                worryMessage.textContent = 'Shredding your worry...';
                setTimeout(() => {
                    worryText.value = '';
                    worryMessage.textContent = 'Worry shredded!';
                    worryText.classList.remove('shredding');
                }, 1000);
            } else {
                worryMessage.textContent = 'Please write a worry to shred.';
            }
        }

        // Color shift
        function startColorShift() {
            const square = document.getElementById('color-square');
            const colors = ['#2ecc71', '#3498db', '#9b59b6', '#e74c3c', '#f1c40f'];
            let index = 0;
            const interval = setInterval(() => {
                square.style.backgroundColor = colors[index];
                index = (index + 1) % colors.length;
            }, 1000);
            setTimeout(() => clearInterval(interval), 10000);
        }

        // Share on X
        document.getElementById('share').addEventListener('click', () => {
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent('Boost your mood with MoodTask! Select your mood and get a quick, science-backed task to feel better. #MoodBoost');
            window.open(`https://x.com/intent/tweet?url=${url}&text=${text}`, '_blank');
            gtag('event', 'Share', { 'event_category': 'Social', 'event_label': 'X Share' });
        });
    </script>
</body>
</html>
